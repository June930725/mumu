(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{f770:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",{staticClass:"flex flex-start",attrs:{id:"backMember"}},[t("q-page-container",{staticClass:"container-back100 q-my-none"},[t("q-item",{attrs:{id:"title"}},[t("q-item-section",{attrs:{avatar:""}},[t("q-icon",{attrs:{name:"account_circle"}})],1),t("q-item-section",[e._v("會員資料管理")])],1),t("q-table",{attrs:{filter:e.filter,columns:e.titles,data:this.members,"row-key":"name","rows-per-page-options":[5,8,10],grid:e.$q.screen.xs},scopedSlots:e._u([{key:"body",fn:function(a){return[t("q-tr",[t("q-td",{key:"account"},[t("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(a.row.account)+"\n            ")])],1),t("q-td",{key:"name"},[a.row.edit?t("q-input",{attrs:{outlined:"",filled:""},model:{value:a.row.modelName,callback:function(t){e.$set(a.row,"modelName",t)},expression:"member.row.modelName"}}):t("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(a.row.name)+"\n            ")])],1),t("q-td",{key:"phoneNum"},[t("div",{staticClass:"text-pre-wrap"}),a.row.edit?t("q-input",{attrs:{outlined:"",filled:""},model:{value:a.row.modelPhoneNum,callback:function(t){e.$set(a.row,"modelPhoneNum",t)},expression:"member.row.modelPhoneNum"}}):t("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(a.row.phoneNum)+"\n            ")])],1),t("q-td",{key:"email"},[t("div",{staticClass:"text-pre-wrap"}),a.row.edit?t("q-input",{attrs:{outlined:"",filled:""},model:{value:a.row.modelEmail,callback:function(t){e.$set(a.row,"modelEmail",t)},expression:"member.row.modelEmail"}}):t("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(a.row.email)+"\n            ")])],1),t("q-td",{key:"address"},[a.row.edit?t("q-input",{attrs:{outlined:"",filled:""},model:{value:a.row.modelAddress,callback:function(t){e.$set(a.row,"modelAddress",t)},expression:"member.row.modelAddress"}}):t("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(a.row.address)+"\n            ")])],1),t("q-td",{key:"active"},[a.row.edit?e._e():t("q-btn",{staticClass:"edit",attrs:{outline:"",rounded:""},on:{click:function(t){return e.edit(a)}}},[t("i",{staticClass:"fas fa-pen"})]),a.row.edit?e._e():t("q-btn",{staticClass:"del",attrs:{outline:"",rounded:""},on:{click:function(t){return e.del(a)}}},[t("i",{staticClass:"fas fa-trash-alt"})]),a.row.edit?t("q-btn",{staticClass:"save",attrs:{outline:"",rounded:""},on:{click:function(t){return e.save(a)}}},[t("i",{staticClass:"fas fa-save"})]):e._e(),a.row.edit?t("q-btn",{staticClass:"cancel",attrs:{outline:"",rounded:""},on:{click:function(t){return e.cancel(a)}}},[t("i",{staticClass:"fas fa-times"})]):e._e()],1)],1)]}},{key:"top-right",fn:function(){return[t("q-input",{attrs:{filled:"",dense:"",outlined:"",placeholder:"請輸入關鍵字"},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(a){e.filter=a},expression:"filter"}})]},proxy:!0}])})],1)],1)},o=[],r=(t("26e9"),t("a434"),{name:"PageMember",data(){return{filter:"",titles:[{name:"account",required:!0,label:"帳號",align:"left",field:"account"},{name:"name",required:!0,label:"姓名",align:"left",field:"name"},{name:"phoneNum",required:!0,label:"手機",align:"left",field:"phoneNum"},{name:"email",required:!0,label:"email",align:"left",field:"email"},{name:"address",required:!0,label:"地址",align:"left",field:"address"},{name:"active",required:!0,align:"left",label:""}],members:[]}},computed:{member(){return this.$store.state.member}},methods:{edit(e){e.row.edit=!0,e.modelName=e.row.name,e.modelPhoneNum=e.row.phoneNum,e.modelEmail=e.row.email,e.modelAddress=e.row.address},del(e){this.axios.delete("https://mumuweb.herokuapp.com/members/"+e.row._id).then((a=>{a.data.success?(this.members.splice(e.rowIndex,1),this.$q.notify({color:"light-green",icon:"fas fa-check-circle",message:"刪除成功"})):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:a.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))},save(e){this.axios.patch("https://mumuweb.herokuapp.com/members/"+e.row._id,{name:e.row.modelName,phoneNum:e.row.modelPhoneNum,email:e.row.modelEmail,address:e.row.modelAddress}).then((a=>{a.data.success?(e.row.edit=!1,e.row.name=e.row.modelName,e.row.phoneNum=e.row.modelPhoneNum,e.row.email=e.row.modelEmail,e.row.address=e.row.modelAddress,this.$q.notify({color:"light-green",icon:"fas fa-check-circle",message:"保存成功"})):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:a.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))},cancel(e){e.row.edit=!1,e.modelName=e.row.name,e.modelPhoneNum=e.row.phoneNum,e.modelEmail=e.row.email,e.modelAddress=e.row.address}},mounted(){this.axios.get("https://mumuweb.herokuapp.com/members/member/").then((e=>{e.data.success?this.members=e.data.result.map((e=>(e.edit=!1,e.modelName=e.name,e.modelPhoneNum=e.phoneNum,e.modelEmail=e.email,e.modelAddress=e.address,e))).reverse():this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))}}),l=r,i=t("2877"),n=t("9989"),m=t("09e3"),d=t("66e5"),c=t("4074"),u=t("0016"),f=t("eaac"),w=t("bd08"),p=t("db86"),h=t("0170"),b=t("27f9"),q=t("9c40"),g=t("eebe"),k=t.n(g),N=Object(i["a"])(l,s,o,!1,null,null,null);a["default"]=N.exports;k()(N,"components",{QPage:n["a"],QPageContainer:m["a"],QItem:d["a"],QItemSection:c["a"],QIcon:u["a"],QTable:f["a"],QTr:w["a"],QTd:p["a"],QItemLabel:h["a"],QInput:b["a"],QBtn:q["a"]})}}]);