(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"713b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hHh lpR fff"}},[a("AppHeader"),a("router-view"),a("AppFooter")],1)},o=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"appHeader"}},[s("q-header",{staticClass:"text-dark bg-white",attrs:{reveal:"","height-hint":"98"}},[s("div",{staticClass:"btn-group-sm"},[0===t.member.id.length?s("q-btn",{attrs:{unelevated:"",rounded:"",icon:"login"},on:{click:function(e){t.logCard=!0}}}):t._e(),0===t.member.id.length?s("q-btn",{attrs:{unelevated:"",rounded:"",icon:"r_person_add"},on:{click:function(e){t.regCard=!0}}}):t._e(),t.member.id.length>0&&!1===t.member.right?s("q-btn",{attrs:{unelevated:"",rounded:"",icon:"account_circle",to:"/Member"}}):t._e(),t.member.id.length>0?s("q-btn",{attrs:{unelevated:"",rounded:"",icon:"logout"},on:{click:t.logout}}):t._e()],1),s("div",{staticClass:"btn-group-lg"},[0===t.member.id.length?s("q-btn",{attrs:{outline:"",rounded:"",label:"登入",icon:"login"},on:{click:function(e){t.logCard=!0}}}):t._e(),t._v("\n       \n      "),0===t.member.id.length?s("q-btn",{attrs:{unelevated:"",rounded:"",label:"註冊",icon:"r_person_add"},on:{click:function(e){t.regCard=!0}}}):t._e(),t.member.id.length>0&&!1===t.member.right?s("q-btn",{attrs:{unelevated:"",rounded:"",label:"會員中心",icon:"account_circle",to:"/Member"}}):t._e(),t.member.id.length>0?s("q-btn",{attrs:{unelevated:"",rounded:"",label:"登出",icon:"logout"},on:{click:t.logout}}):t._e()],1),s("q-toolbar",[s("q-toolbar-title",{attrs:{align:"center"}},[s("a",{on:{click:function(e){return e.preventDefault(),t.$router.push("/")}}},[s("img",{staticClass:"q-mt-lg",attrs:{src:a("c343"),width:"220"}})])])],1),s("q-tabs",{attrs:{align:"center"}},[s("q-route-tab",{attrs:{to:"/News",label:"最新消息"}}),s("q-route-tab",{attrs:{to:"/Donate",label:"物資捐贈"}}),s("q-route-tab",{attrs:{to:"/Share",label:"募募分享"}}),s("q-route-tab",{attrs:{to:"/About",label:"關於我們"}}),!0===t.member.right?s("q-route-tab",{attrs:{to:"/admin",label:"後台管理"}}):t._e()],1),s("q-dialog",{model:{value:t.logCard,callback:function(e){t.logCard=e},expression:"logCard"}},[s("q-card",{attrs:{id:"loginCard"}},[s("q-card-section",[s("div",{attrs:{"text-overline":""}},[t._v("會員登入")])]),s("form",{on:{submit:function(e){return e.preventDefault(),t.signin(e)},reset:t.inReset}},[s("q-card-section",{staticClass:"q-gutter-y-md column"},[s("q-input",{attrs:{autofocus:"",rounded:"",outlined:"",required:"",label:"帳號 *",type:"text",state:t.accountState},model:{value:t.log.account,callback:function(e){t.$set(t.log,"account",e)},expression:"log.account"}}),s("q-input",{attrs:{rounded:"",outlined:"",required:"",label:"密碼 *",type:t.isPwd?"password":"text",state:t.passwordState},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.log.password,callback:function(e){t.$set(t.log,"password",e)},expression:"log.password"}}),s("q-checkbox",{attrs:{label:"記住帳號"},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}}),s("q-card-actions",{attrs:{align:"center"}},[s("q-btn",{attrs:{rounded:"",outline:"",label:"登入",type:"submit"}})],1)],1)],1)],1)],1),s("q-dialog",{model:{value:t.regCard,callback:function(e){t.regCard=e},expression:"regCard"}},[s("q-card",{attrs:{id:"regCard"}},[s("q-card-section",[s("div",{attrs:{"text-overline":""}},[t._v("會員註冊")])]),s("form",{on:{submit:function(e){return e.preventDefault(),t.signup(e)},reset:t.regReset}},[s("q-card-section",{staticClass:"row"},[s("div",{staticClass:"mt-0 col-12 col-sm-6 q-gutter-y-md "},[s("q-input",{attrs:{autofocus:"",rounded:"",outlined:"",required:"",label:"帳號 *",type:"text",state:t.regAccountState},model:{value:t.reg.account,callback:function(e){t.$set(t.reg,"account",e)},expression:"reg.account"}})],1),s("div",{staticClass:"col-12 col-sm-6 q-gutter-y-md"},[s("q-input",{attrs:{rounded:"",outlined:"",required:"",label:"密碼 *",type:t.isPwd?"password":"text",state:t.regPasswordState},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.reg.password,callback:function(e){t.$set(t.reg,"password",e)},expression:"reg.password"}})],1),s("div",{staticClass:"col-12 col-sm-6 q-gutter-y-md"},[s("q-input",{attrs:{rounded:"",outlined:"",label:"姓名 *"},model:{value:t.reg.name,callback:function(e){t.$set(t.reg,"name",e)},expression:"reg.name"}})],1),s("div",{staticClass:"col-12 col-sm-6 q-gutter-y-md"},[s("q-input",{attrs:{rounded:"",outlined:"",label:"手機 *"},model:{value:t.reg.phoneNum,callback:function(e){t.$set(t.reg,"phoneNum",e)},expression:"reg.phoneNum"}})],1),s("div",{staticClass:"col-12 q-gutter-y-md"},[s("q-input",{attrs:{rounded:"",outlined:"",label:"Email *"},model:{value:t.reg.email,callback:function(e){t.$set(t.reg,"email",e)},expression:"reg.email"}})],1),s("div",{staticClass:"col-12 q-gutter-y-md"},[s("q-input",{attrs:{rounded:"",outlined:"",label:"地址 *"},model:{value:t.reg.address,callback:function(e){t.$set(t.reg,"address",e)},expression:"reg.address"}})],1),s("div",{staticClass:"col-12 q-gutter-y-md items-center"},[s("q-card-actions",{staticClass:"col-12",attrs:{align:"center"}},[s("q-btn",{attrs:{rounded:"",outline:"",label:"註冊",type:"submit"}}),s("q-btn",{staticClass:"reset",attrs:{rounded:"",outline:"",label:"重設",type:"reset"}})],1)],1)])],1)],1)],1)],1)],1)},n=[],i={data(){return{logCard:!1,regCard:!1,checkbox:!1,log:{account:"",password:""},reg:{account:"",password:"",name:"",phoneNum:"",email:"",address:"",right:!1},isPwd:!0}},computed:{member(){return this.$store.state.member},accountState(){return 0===this.log.account.length?null:this.log.account.length>=4&&this.log.account.length<=20},passwordState(){return 0===this.log.password.length?null:this.log.password.length>=4&&this.log.password.length<=20},regAccountState(){return 0===this.reg.account.length?null:this.reg.account.length>=4&&this.reg.account.length<=20},regPasswordState(){return 0===this.reg.password.length?null:this.reg.password.length>=4&&this.reg.password.length<=20}},methods:{signin(){this.accountState&&this.passwordState&&this.axios.post("https://mumuweb.herokuapp.com/members/login",this.log).then((t=>{t.data.success?(this.$store.commit("login",t.data.result),!0===this.checkbox||(this.log.account=""),this.log.password="",this.logCard=!1,this.$router.push("/Member")):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:t.data.message})})).catch((t=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:t.response.data.message})}))},inReset(){this.log.account="",this.log.password=""},signup(){this.regAccountState&&this.regPasswordState&&this.axios.post("https://mumuweb.herokuapp.com/members/",this.reg).then((t=>{t.data.success?(this.regCard=!1,this.$q.notify({color:"light-green",icon:"fas fa-check-circle",message:"註冊成功"}),this.reg.account="",this.reg.password="",this.reg.name="",this.reg.phoneNum="",this.reg.email="",this.reg.address=""):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:t.data.message})})).catch((t=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:t.response.data.message})}))},regReset(){this.reg.account="",this.reg.password="",this.reg.name="",this.reg.phoneNum="",this.reg.email="",this.reg.address=""},logout(){this.axios.delete("https://mumuweb.herokuapp.com/members/logout").then((t=>{t.data.success?(this.$q.notify({color:"light-green",icon:"fas fa-check-circle",message:"已登出"}),this.$store.commit("logout"),"/"!==this.$route.path&&this.$router.push("/")):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:t.data.message})})).catch((t=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:t.response.data.message})}))},heartbeat(){this.axios.get("https://mumuweb.herokuapp.com/members/heartbeat").then((t=>{this.member.id.length>0&&(t.data||(this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:"登入時效已過，請重新登入"}),this.$store.commit("logout"),"/"!==this.$route.path&&this.$router.push("/")))})).catch((()=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:"發生錯誤"}),this.$store.commit("logout"),"/"!==this.$route.path&&this.$router.push("/")}))}},mounted(){this.heartbeat(),setInterval((()=>{this.heartbeat()}),5e3)}},l=i,c=a("2877"),u=a("e359"),d=a("9c40"),g=a("65c6"),m=a("6ac5"),h=a("429b"),p=a("7867"),b=a("24e8"),f=a("f09f"),q=a("a370"),v=a("27f9"),w=a("0016"),x=a("8f8e"),C=a("4b7e"),k=a("eebe"),y=a.n(k),$=Object(c["a"])(l,r,n,!1,null,null,null),_=$.exports;y()($,"components",{QHeader:u["a"],QBtn:d["a"],QToolbar:g["a"],QToolbarTitle:m["a"],QTabs:h["a"],QRouteTab:p["a"],QDialog:b["a"],QCard:f["a"],QCardSection:q["a"],QInput:v["a"],QIcon:w["a"],QCheckbox:x["a"],QCardActions:C["a"]});var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-footer",{attrs:{id:"footer"}},[a("p",{staticClass:"text-center"},[t._v("\n    Copyright © 2020 Y.C. WU\n    "),a("br"),t._v("\n    所有圖片皆來自於網路，僅做為學習用途。\n  ")])])},Q=[],P={data(){return{}}},A=P,N=a("7ff0"),R=Object(c["a"])(A,S,Q,!1,null,null,null),D=R.exports;y()(R,"components",{QFooter:N["a"]});var H={components:{AppHeader:_,AppFooter:D}},T=H,E=a("4d5a"),j=Object(c["a"])(T,s,o,!1,null,null,null);e["default"]=j.exports;y()(j,"components",{QLayout:E["a"]})},c343:function(t,e,a){t.exports=a.p+"img/mumu-07.91bcd529.svg"}}]);