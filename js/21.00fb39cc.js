(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"56eb":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"flex flex-start",attrs:{id:"backShare"}},[o("q-page-container",{staticClass:"container-back100 q-my-none"},[o("q-item",{attrs:{id:"title"}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:"account_circle"}})],1),o("q-item-section",[e._v("募募分享管理")])],1),o("q-table",{attrs:{filter:e.filter,columns:e.titles,data:this.images,"row-key":"name","rows-per-page-options":[5,8,10],grid:e.$q.screen.xs},scopedSlots:e._u([{key:"body",fn:function(t){return[o("q-tr",[o("q-td",{key:"item"},[t.row.edit?o("q-input",{attrs:{outlined:"",filled:""},model:{value:t.row.modelItem,callback:function(o){e.$set(t.row,"modelItem",o)},expression:"image.row.modelItem"}}):o("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(t.row.item)+"\n            ")])],1),o("q-td",[o("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(t.row.member)+"\n            ")])],1),o("q-td",{key:"category"},[o("div",{staticClass:"text-pre-wrap"}),t.row.edit?o("q-input",{attrs:{outlined:"",filled:""},model:{value:t.row.modelCategory,callback:function(o){e.$set(t.row,"modelCategory",o)},expression:"image.row.modelCategory"}}):o("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(t.row.category)+"\n            ")])],1),o("q-td",{key:"spec"},[o("div",{staticClass:"text-pre-wrap"}),t.row.edit?o("q-input",{attrs:{outlined:"",filled:""},model:{value:t.row.modelShipping,callback:function(o){e.$set(t.row,"modelShipping",o)},expression:"image.row.modelShipping"}}):o("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(t.row.shipping)+"\n            ")])],1),o("q-td",{key:"description"},[o("div",{staticClass:"text-pre-wrap"}),t.row.edit?o("q-input",{attrs:{outlined:"",filled:"","stack-label":"",type:"textarea",label:"請輸入50個字以內"},model:{value:t.row.modelDescription,callback:function(o){e.$set(t.row,"modelDescription",o)},expression:"image.row.modelDescription"}}):o("q-item-label",{attrs:{lines:2}},[e._v("\n              "+e._s(t.row.title)+"\n            ")])],1),o("q-td",{key:"amount"},[t.row.edit?o("q-input",{attrs:{outlined:"",filled:""},model:{value:t.row.modelAmount,callback:function(o){e.$set(t.row,"modelAmount",o)},expression:"image.row.modelAmount"}}):o("q-item-label",{attrs:{lines:1}},[e._v("\n              "+e._s(t.row.amount)+"\n            ")])],1),o("q-td",{key:"active"},[t.row.edit?e._e():o("q-btn",{staticClass:"edit",attrs:{outline:"",rounded:""},on:{click:function(o){return e.edit(t)}}},[o("i",{staticClass:"fas fa-pen"})]),t.row.edit?e._e():o("q-btn",{staticClass:"del",attrs:{outline:"",rounded:""},on:{click:function(o){return e.del(t)}}},[o("i",{staticClass:"fas fa-trash-alt"})]),t.row.edit?o("q-btn",{staticClass:"save",attrs:{outline:"",rounded:""},on:{click:function(o){return e.save(t)}}},[o("i",{staticClass:"fas fa-save"})]):e._e(),t.row.edit?o("q-btn",{staticClass:"cancel",attrs:{outline:"",rounded:""},on:{click:function(o){return e.cancel(t)}}},[o("i",{staticClass:"fas fa-times"})]):e._e()],1)],1)]}},{key:"top-right",fn:function(){return[o("q-input",{attrs:{filled:"",dense:"",outlined:"",placeholder:"請輸入關鍵字"},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])})],1)],1)},i=[],r=(o("e01a"),o("26e9"),o("a434"),{name:"PageShare",data(){return{donateCard:!1,filter:"",share:{addImg:null,item:"",shipping:"",category:"",description:"",amount:""},images:[],titles:[{name:"item",required:!0,label:"物品名稱",align:"left",field:"item",sortable:!0},{name:"member",required:!0,label:"會員帳號",align:"left",field:"member",sortable:!0},{name:"category",required:!0,align:"left",label:"類別",field:"category",sortable:!0},{name:"shipping",required:!0,align:"left",label:"運送方式",field:"shipping"},{name:"description",required:!0,align:"left",label:"物品說明",field:"title"},{name:"amount",required:!0,align:"left",label:"提供數量",field:"amount",sortable:!0},{name:"active",required:!0,align:"left",label:""}],options:["文具","書籍","玩具","電器","醫療","其他"]}},computed:{member(){return this.$store.state.member}},methods:{edit(e){e.row.edit=!0,e.row.modelItem=e.row.item,e.row.modelShipping=e.row.shipping,e.row.modelCategory=e.row.category,e.row.modelDescription=e.row.title,e.row.modelAmount=e.row.amount},del(e){this.axios.delete("https://mumuweb.herokuapp.com/shares/"+e.row._id).then((t=>{t.data.success?(this.images.splice(e.rowIndex,1),this.$q.notify({color:"light-green",icon:"fas fa-check-circle",message:"刪除成功"})):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:t.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))},save(e){this.axios.patch("https://mumuweb.herokuapp.com/shares/"+e.row._id,{item:e.row.modelItem,shipping:e.row.modelShipping,category:e.row.modelCategory,description:e.row.modelDescription,amount:e.row.modelAmount}).then((t=>{t.data.success?(console.log(e),e.row.edit=!1,e.row.item=e.row.modelItem,e.row.shipping=e.row.modelShipping,e.row.category=e.row.modelCategory,e.row.title=e.row.modelDescription,e.row.amount=e.row.modelAmount,this.$q.notify({color:"light-green",icon:"fas fa-check-circle",message:"保存成功"})):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:t.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))},cancel(e){e.row.edit=!1,e.row.modelItem=e.row.item,e.row.modelShipping=e.row.shipping,e.row.modelCategory=e.row.category,e.row.modelDescription=e.row.title,e.row.modelAmount=e.row.amount}},mounted(){this.axios.get("https://mumuweb.herokuapp.com/shares/member").then((e=>{e.data.success?this.images=e.data.result.map((e=>(e.src="https://mumuweb.herokuapp.com/shares/file/"+e.file,e.edit=!1,e.modelItem=e.item,e.modelShipping=e.shipping,e.modelCategory=e.category,e.title=e.description,e.modelDescription=e.description,e.modelAmount=e.amount,delete e.file,delete e.description,e))).reverse():this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))}}),s=r,l=o("2877"),n=o("9989"),c=o("09e3"),m=o("66e5"),d=o("4074"),p=o("0016"),u=o("eaac"),w=o("bd08"),f=o("db86"),g=o("27f9"),h=o("0170"),b=o("9c40"),q=o("eebe"),y=o.n(q),k=Object(l["a"])(s,a,i,!1,null,null,null);t["default"]=k.exports;y()(k,"components",{QPage:n["a"],QPageContainer:c["a"],QItem:m["a"],QItemSection:d["a"],QIcon:p["a"],QTable:u["a"],QTr:w["a"],QTd:f["a"],QInput:g["a"],QItemLabel:h["a"],QBtn:b["a"]})}}]);