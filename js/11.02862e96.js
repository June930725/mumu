(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"70d8":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"member"}},[s("q-page-container",{staticClass:"containerM"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 q-px-lg q-mb-lg"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-mu11 text-white flex justify-between items-end"},[s("div",{staticClass:"profile"},[e._v("會員資料")]),s("div",{staticClass:"text-subtitle"},[e._v(e._s(e.mem.account))])]),s("q-card-section",{staticClass:"mEdit bg-white text-white"},[!0===e.editing?s("div",[s("q-input",{staticClass:"q-pb-sm",attrs:{outlined:"",filled:"",label:"姓名"},model:{value:e.mem.modelName,callback:function(t){e.$set(e.mem,"modelName",t)},expression:"mem.modelName"}}),s("q-input",{staticClass:"q-pb-sm",attrs:{outlined:"",filled:"",label:"電話"},model:{value:e.mem.modelPhoneNum,callback:function(t){e.$set(e.mem,"modelPhoneNum",t)},expression:"mem.modelPhoneNum"}}),s("q-input",{staticClass:"q-pb-sm",attrs:{outlined:"",filled:"",label:"電子信箱"},model:{value:e.mem.modelEmail,callback:function(t){e.$set(e.mem,"modelEmail",t)},expression:"mem.modelEmail"}}),s("q-input",{staticClass:"q-pb-sm",attrs:{outlined:"",filled:"",label:"地址"},model:{value:e.mem.modelAddress,callback:function(t){e.$set(e.mem,"modelAddress",t)},expression:"mem.modelAddress"}}),s("div",{attrs:{align:"right"}},[s("q-btn",{staticClass:"save q-mr-xs",attrs:{outline:"",rounded:""},on:{click:function(t){return e.save()}}},[s("i",{staticClass:"fas fa-save"})]),s("q-btn",{staticClass:"cancel",attrs:{outline:"",rounded:""},on:{click:function(t){return e.cancel()}}},[s("i",{staticClass:"fas fa-times"})])],1)],1):s("div",[s("p",[e._v("姓名："+e._s(e.mem.name))]),s("p",[e._v("電話："+e._s(e.mem.phoneNum))]),s("p",[e._v("電子信箱："+e._s(e.mem.email))]),s("p",[e._v("地址："+e._s(e.mem.address))]),s("div",{attrs:{align:"right"}},[s("q-btn",{staticClass:"edit",attrs:{outline:"",rounded:""},on:{click:function(t){return e.edit()}}},[s("i",{staticClass:"fas fa-pen"})])],1)])])],1)],1),s("div",{staticClass:"col-12 q-px-lg q-mb-lg order"},[s("q-card",{staticClass:"my-card q-pb-md"},[s("q-card-section",{staticClass:"bg-mu03 text-white flex justify-between items-end"},[s("div",{staticClass:"profile"},[e._v("捐贈訂單資料")])]),s("div",e._l(e.mem.orderDonate,(function(t,a){return s("q-card-section",{key:a,staticClass:"oEdit bg-white text-white"},[s("div",{staticClass:"q-pr-xs q-mb-xs date text-right"},[e._v("\n                "+e._s(t.date.substr(0,10))+"\n              ")]),s("q-list",[s("q-card-section",{staticClass:"ordNum"},[e._v("\n                  訂單編號 "+e._s(t._id)+"\n                ")]),s("q-expansion-item",{staticClass:"connect",attrs:{label:"聯絡資訊"}},[s("q-card",[s("q-card-section",[s("p",[e._v("姓名："+e._s(t.name))]),s("p",[e._v("電話："+e._s(t.phoneNum))]),s("p",[e._v("電子信箱："+e._s(t.email))]),s("p",[e._v("地址："+e._s(t.address))]),s("p",[e._v("寄送方式："+e._s(t.send))]),s("p",[e._v("捐贈備註："+e._s(t.note))])])],1)],1),s("q-expansion-item",{staticClass:"detail",attrs:{label:"捐贈明細"}},[s("q-card",{staticClass:"row"},e._l(t.donation,(function(t,a){return s("q-card-section",{key:a,staticClass:"col-6 col-md-4 col-lg-3"},[s("q-item-section",{staticClass:"col-12"},[s("q-img",{staticClass:"q-mb-sm row",attrs:{src:e.img(t.d_id.file)}}),s("div",{staticClass:"col-12"},[s("q-item-label",[e._v(e._s(t.d_id.item))]),s("q-item-label",{staticClass:"caption",attrs:{lines:2}},[e._v("\n                            數量："+e._s(t.quantity)+"\n                          ")])],1)],1),s("q-item-section",{staticClass:"col-6 col-md-6 "})],1)})),1)],1)],1)],1)})),1)],1)],1)]),s("q-btn",{staticClass:"add",attrs:{round:"",icon:"fa fa-plus",size:"md"},on:{click:function(t){e.shareCard=!0}}}),s("q-dialog",{model:{value:e.shareCard,callback:function(t){e.shareCard=t},expression:"shareCard"}},[s("q-card",{attrs:{id:"shareCard"}},[s("q-card-section",[s("div",{attrs:{"text-overline":""}},[e._v("新增募募分享")])]),s("form",{on:{submit:function(t){return t.preventDefault(),e.add(t)},reset:e.addReset}},[s("q-card-section",{staticClass:"row"},[s("div",{staticClass:"mt-0 col-12 q-gutter-y-md"},[s("q-input",{attrs:{rounded:"",outlined:"",required:"",auto:"",type:"text",label:"物品名稱 *"},model:{value:e.share.item,callback:function(t){e.$set(e.share,"item",t)},expression:"share.item"}})],1),s("div",{staticClass:"col-12 col-sm-6 q-gutter-y-md"},[s("q-select",{attrs:{rounded:"",outlined:"",required:"",label:"類別 *",options:e.options},model:{value:e.share.category,callback:function(t){e.$set(e.share,"category",t)},expression:"share.category"}})],1),s("div",{staticClass:"col-12 col-sm-6 q-gutter-y-md"},[s("q-input",{attrs:{rounded:"",outlined:"",required:"",type:"text",label:"數量 *"},model:{value:e.share.amount,callback:function(t){e.$set(e.share,"amount",t)},expression:"share.amount"}})],1),s("div",{staticClass:"col-12 text-left ship q-pt-sm"},[s("div",[s("span",{staticClass:"shipping"},[e._v("運送方式：")])]),s("div",[s("q-option-group",{staticClass:"shipping",attrs:{size:"sm",dense:"",inline:"",options:e.radios},model:{value:e.share.shipping,callback:function(t){e.$set(e.share,"shipping",t)},expression:"share.shipping"}})],1)]),s("div",{staticClass:"col-12 col-sm-6 q-gutter-y-md"},[s("q-input",{attrs:{rounded:"",outlined:"",required:"",label:"圖片說明","bottom-slots":"",counter:"",type:"textarea",rules:[function(e){return!!e||"請輸入1-50個字"},function(e){return e.length<=50||"最多輸入50個字"}]},scopedSlots:e._u([{key:"hint",fn:function(){return[e._v("\n                  請輸入1-50個字\n                ")]},proxy:!0}]),model:{value:e.share.description,callback:function(t){e.$set(e.share,"description",t)},expression:"share.description"}})],1),s("div",{staticClass:"col-12 col-sm-6 q-gutter-y-md"},[s("img-inputer",{attrs:{icon:"img","bottom-text":"點擊或拖曳更換圖片",placeholder:"請選擇上傳物品實拍照","max-size":1024,"bottom-slots":"",exceedSizeText:"檔案大小不能超過",accept:"image/*"},model:{value:e.share.addImg,callback:function(t){e.$set(e.share,"addImg",t)},expression:"share.addImg"}})],1),s("div",{staticClass:"mt-0 col-md-6 q-gutter-y-md "}),s("q-card-actions",{staticClass:"col-12",attrs:{align:"center"}},[s("q-btn",{attrs:{rounded:"",outline:"",label:"送出",type:"submit"}}),s("q-btn",{attrs:{rounded:"",outline:"",width:"100px",label:"重設",type:"reset"}})],1)],1)],1)],1)],1)],1)],1)},i=[],m=(s("e01a"),{name:"PageMember",data(){return{shareCard:!1,editing:!1,share:{addImg:null,item:"",shipping:"郵寄",category:"",description:"",amount:""},images:[],mem:{},options:["文具","書籍","玩具","電器","其他"],radios:[{label:"郵寄",value:"郵寄"},{label:"宅配",value:"宅配"},{label:"面交",value:"面交"}]}},computed:{member(){return this.$store.state.member}},methods:{add(){if(this.share.addImg.size>1048576)this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:"圖片太大"});else if(this.share.addImg.type.includes("image")){const e=new FormData;e.append("member",this.share.member),e.append("item",this.share.item),e.append("shipping",this.share.shipping),e.append("category",this.share.category),e.append("amount",this.share.amount),e.append("description",this.share.description),e.append("image",this.share.addImg),this.axios.post("https://mumuweb.herokuapp.com/shares/",e).then((e=>{e.data.success?(e.data.result.src="https://mumuweb.herokuapp.com/shares/file/"+e.data.result.file,e.data.result.edit=!1,e.data.result.modelItem=e.data.result.item,e.data.result.modelShipping=e.data.result.shipping,e.data.result.modelCategory=e.data.result.category,e.data.result.modelDescription=e.data.result.description,e.data.result.title=e.data.result.description,e.data.result.modelAmount=e.data.result.amount,delete e.data.result.file,delete e.data.result.description,this.images.unshift(e.data.result),this.share.addImg=null,this.share.item="",this.share.shipping="",this.share.category="",this.share.description="",this.share.amount="",this.shareCard=!1,this.$q.notify({color:"light-green",icon:"fas fa-check-circle",message:"新增成功"})):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))}else this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:"檔案格式錯誤"})},addReset(){this.share.addImg=null,this.share.item="",this.share.shipping="郵寄",this.share.category="",this.share.description="",this.share.amount=""},edit(){this.editing=!0,this.mem.modelName=this.mem.name,this.mem.modelPhoneNum=this.mem.phoneNum,this.mem.modelEmail=this.mem.email,this.mem.modelAddress=this.mem.address},save(){this.axios.patch("https://mumuweb.herokuapp.com/members/"+this.mem._id,{name:this.mem.modelName,phoneNum:this.mem.modelPhoneNum,email:this.mem.modelEmail,address:this.mem.modelAddress}).then((e=>{e.data.success?(this.editing=!1,this.mem.name=this.mem.modelName,this.mem.phoneNum=this.mem.modelPhoneNum,this.mem.email=this.mem.modelEmail,this.mem.address=this.mem.modelAddress,this.$q.notify({color:"light-green",icon:"fas fa-check-circle",message:"保存成功"})):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))},cancel(){this.editing=!1,this.mem.modelName=this.mem.name,this.mem.modelPhoneNum=this.mem.phoneNum,this.mem.modelEmail=this.mem.email,this.mem.modelAddress=this.mem.address},img(e){return"https://mumuweb.herokuapp.com/donates/file/"+e}},mounted(){this.axios.get("https://mumuweb.herokuapp.com/members/member/"+this.member.id).then((e=>{e.data.success?(this.mem=e.data.result,this.editing=!1,this.mem.modelName=this.mem.name,this.mem.modelPhoneNum=this.mem.phoneNum,this.mem.modelEmail=this.mem.email,this.mem.modelAddress=this.mem.address):this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.data.message})})).catch((e=>{this.$q.notify({color:"red-6",icon:"fas fa-exclamation-circle",message:e.response.data.message})}))}}),l=m,o=s("2877"),n=s("09e3"),r=s("f09f"),d=s("a370"),c=s("27f9"),h=s("9c40"),u=s("1c1c"),p=s("3b73"),g=s("4074"),f=s("068f"),b=s("0170"),q=s("24e8"),v=s("ddd8"),C=s("9f0a"),x=s("4b7e"),_=s("eebe"),y=s.n(_),k=Object(o["a"])(l,a,i,!1,null,null,null);t["default"]=k.exports;y()(k,"components",{QPageContainer:n["a"],QCard:r["a"],QCardSection:d["a"],QInput:c["a"],QBtn:h["a"],QList:u["a"],QExpansionItem:p["a"],QItemSection:g["a"],QImg:f["a"],QItemLabel:b["a"],QDialog:q["a"],QSelect:v["a"],QOptionGroup:C["a"],QCardActions:x["a"]})}}]);